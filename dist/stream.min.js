define(["require","exports"],function(z,b){var j,i,g,k,e,f,h,l,m,p,n,q,w=Function.prototype.call.bind(Array.prototype.reduce),r=function(a){return function(){return a}};j=function(a,d){return{first:a,rest:d}};i=function(a,d){var c;return j(a,function(){var a=arguments;void 0===c&&(c=d.apply(this,a));return c})};e=function(a){return a.first};f=function(a){return a.rest(e(a))};h=function(a){return null===a};g=function(a,d){return h(a)?d():i(e(a),g.bind(null,f(a),d))};var x=function(a,d){return g(a,
r(d))};k=function(a){return h(a)?a:g(e(a),k.bind(null,f(a)))};var s=function(a,d,c){return d>=c?null:i(a[d],s.bind(null,a,d+1,c))};l=function(a,d){for(var c=d,b=0;!h(c);c=f(c))a(e(c),b),b+=1};m=function(a,d,c){var b=d;l(function(d,c){b=a(b,d,c)},c);return b};var t=function(a,d,c,b){return h(b)?c:d(t(a+1,d,c,f(b)),e(b),a)};p=t.bind(null,0);var y=function(a,b){a.push(b);return a};var u=function(a,b,c){return h(c)?c:i(b(e(c),a),u.bind(null,a+1,b,f(c)))};n=u.bind(null,0);var v=function(a,b,c){for(;!h(c);c=
f(c)){var g=e(c);if(b(g,a))return i(g,v.bind(null,a+1,b,f(c)));a+=1}return c};q=v.bind(null,0);b.end=null;b.stream=j;b.memoStream=i;b.cons=function(a,b){return j(a,r(b))};b.append=function(){return w(arguments,x,null)};b.appendz=g;b.concat=k;b.from=function(a){return s(a,0,a.length)};b.first=e;b.rest=f;b.isEmpty=h;b.isStream=function(a){return a&&a.hasOwnProperty("first")&&a.hasOwnProperty("rest")||null===a};b.forEach=l;b.foldl=m;b.foldr=p;b.toArray=function(a){return m(y,[],a)};b.map=n;b.filter=
q;b.bind=function(){return k(n.apply(null,arguments))}});
