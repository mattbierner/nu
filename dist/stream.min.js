define(["require","exports"],function(A,b){var k,j,g,l,e,f,h,m,n,q,p,r,x=Function.prototype.call.bind(Array.prototype.reduce),i=function(a){return a.bind.apply(a,arguments)},s=function(a){return function(){return a}};k=function(a,c){return{first:a,rest:c}};j=function(a,c){var d;return k(a,function(){void 0===d&&(d=c.apply(this,arguments));return d})};e=function(a){return a.first};f=function(a){return a.rest(e(a))};h=function(a){return null===a};g=function(a,c){return h(a)?c():j(e(a),i(g,f(a),c))};
var y=function(a,c){return g(a,s(c))};l=function(a){return h(a)?a:g(e(a),i(l,f(a)))};var t=function(a,c,d){return c>=d?null:j(a[c],i(t,a,c+1,d))};m=function(a,c){for(var d=c,b=0;!h(d);d=f(d))a(e(d),b),b+=1};n=function(a,c,d){var b=c;m(function(c,d){return b=a(b,c,d)},d);return b};var u=function(a,c,d,b){return h(b)?d:c(u(a+1,c,d,f(b)),e(b),a)};q=i(u,0);var z=function(a,c){a.push(c);return a};var v=function(a,c,b){return h(b)?b:j(c(e(b),a),i(v,a+1,c,f(b)))};p=i(v,0);var w=function(a,b,d){for(;!h(d);d=
f(d)){var g=e(d);if(b(g,a))return j(g,i(w,a+1,b,f(d)));a+=1}return d};r=i(w,0);b.end=null;b.stream=k;b.memoStream=j;b.cons=function(a,b){return k(a,s(b))};b.append=function(){return x(arguments,y,null)};b.appendz=g;b.concat=l;b.from=function(a){return t(a,0,a.length)};b.first=e;b.rest=f;b.isEmpty=h;b.isStream=function(a){return a&&a.hasOwnProperty("first")&&a.hasOwnProperty("rest")||null===a};b.forEach=m;b.foldl=n;b.foldr=q;b.toArray=function(a){return n(z,[],a)};b.map=p;b.filter=r;b.bind=function(a,
b){return l(p(a,b))}});
