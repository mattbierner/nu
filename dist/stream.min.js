define(function(C,a){var p,l,i,q,d,g,j,r,s,u,t,v,x=Function.prototype.call.bind(Array.prototype.reduce),k=function(b){return b.bind.apply(b,arguments)},w=function(b){return function(){return b}};p=function(b,a){return{first:b,rest:a}};l=function(b,a){var h;return p(b,function(){void 0===h&&(h=a.apply(this,arguments));return h})};d=function(b){return b.first};g=function(b){return b.rest(d(b))};j=function(b){return null===b};i=function(b,a){return j(b)?a():l(d(b),k(i,g(b),a))};var z=function(a,d){return i(a,
w(d))};q=function(a){return j(a)?a:i(d(a),k(q,g(a)))};var A=function y(a,c,e){return c>=e?null:l(a[c],k(y,a,c+1,e))};r=function(a,h){for(var c=h,e=0;!j(c);c=g(c))a(d(c),e),e+=1};s=function(a,h,c){var e=h;r(function(c,f){return e=a(e,c,f)},c);return e};u=k(function h(a,e,n,f){return j(f)?n:e(h(a+1,e,n,g(f)),d(f),a)},0);var B=function(a,c){a.push(c);return a};t=k(function c(a,n,f){return j(f)?f:l(n(d(f),a),k(c,a+1,n,g(f)))},0);v=k(function e(a,f,m){for(;!j(m);m=g(m)){var i=d(m);if(f(i,a))return l(i,
k(e,a+1,f,g(m)));a+=1}return m},0);a.end=null;a.stream=p;a.memoStream=l;a.cons=function(a,d){return p(a,w(d))};a.append=function(){return x(arguments,z,null)};a.appendz=i;a.concat=q;a.from=function(a){return A(a,0,a.length)};a.first=d;a.rest=g;a.isEmpty=j;a.isStream=function(a){return a&&a.hasOwnProperty("first")&&a.hasOwnProperty("rest")||null===a};a.forEach=r;a.foldl=s;a.foldr=u;a.toArray=function(a){return s(B,[],a)};a.map=t;a.filter=v;a.bind=function(a,d){return q(t(a,d))}});
