define(["require","exports"],function(B,d){var j,h,p,k,m,e,f,g,q,n,i,l,r,t,y=Function.prototype.call.bind(Array.prototype.reduce),u=function(a){return function(){return a}};j=function(a,b){return{first:a,rest:b}};h=function(a,b){var c;return j(a,function(){var a=arguments;void 0===c&&(c=b.apply(this,a));return c})};e=function(a){return a.first};f=function(a){return a.rest(e(a))};g=function(a){return null===a};p=function(a,b){return j(a,u(b))};k=function(a,b){return g(a)?b():h(e(a),k.bind(null,f(a),
b))};var z=function(a,b){return k(a,u(b))};m=function(a){return g(a)?a:k(e(a),m.bind(null,f(a)))};var v=function(a,b,c){return b>=c?null:h(a[b],v.bind(null,a,b+1,c))};var s=function(a){var b=s,c=function(a,b){return a+b}.bind(null,1);return j(a,function(a){return b(c(a))})};q=function(a,b){for(var c=b,d=0;!g(c);c=f(c))a(e(c),d),d+=1};i=function(a,b,c){var d=b;q(function(b,c){d=a(d,b,c)},c);return d};n=i.bind(null,function(a){return function(b,c){return a(c,b)}}(p),null);var A=function(a,b){a.push(b);
return a};l=function(a,b){return g(a)||g(b)?null:h([e(a),e(b)],l.bind(null,f(a),f(b)))};var w=function(a,b,c){return g(c)?c:h(b(e(c),a),w.bind(null,a+1,b,f(c)))};r=w.bind(null,0);var x=function(a,b,c){for(;!g(c);c=f(c)){var d=e(c);if(b(d,a))return h(d,x.bind(null,a+1,b,f(c)));a+=1}return c};t=x.bind(null,0);d.end=null;d.stream=j;d.memoStream=h;d.cons=p;d.append=function(){return y(arguments,z,null)};d.appendz=k;d.concat=m;d.from=function(a){return v(a,0,a.length)};d.first=e;d.rest=f;d.isEmpty=g;d.isStream=
function(a){return a&&a.hasOwnProperty("first")&&a.hasOwnProperty("rest")||null===a};d.forEach=q;d.reverse=n;d.foldl=i;d.foldr=function(a,b,c){return i(function(b,c){return a(b,c[0],c[1])},b,n(l(c,s(0))))};d.reduce=function(a,b){return i(a,e(b),f(b))};d.reduceRight=function(a,b){var c;c=n(l(b,s(0)));c=i(function(b,c){return a(b,c[0],c[1])},e(c)[0],f(c));return c};d.toArray=function(a){return i(A,[],a)};d.zip=l;d.map=r;d.filter=t;d.bind=function(){return m(r.apply(null,arguments))}});
