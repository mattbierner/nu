var g=null;
("undefined"!==typeof define?define:function(k){stream=k()})(function(){function k(a,c){a.push(c);return a}function h(a){return a.b(a.a)}function l(a,c,h){if(c>=h)a=g;else var f=a[c],b=e(l,a,c+1,h),d,a=m(f,function(){return void 0===d?d=b():d});return a}function n(a,c){return a===g?c:p(a.a,n(h(a),c))}function p(a,c){return m(a,t(c))}function m(a,c){return{first:a,rest:c}}function e(a){return 1===arguments.length?a:a.bind.apply(a,arguments)}var t=e(e,function(a){return a}),q=e(function(a,c,e,f){for(a=
0;c!==g;)e.call(f,c.a,a),++a,c=h(c)},0),r=e(function c(e,f,b,d){if(f===g)return d;if(void 0===d)return c(1,h(f),b,f.a);q(f,function(c,f){d=b(d,c,f+e)});return d},0),u=e(function s(f,b,d,e){if(b===g)return e;var j=b.a,b=h(b);return b===g&&void 0===e?j:d(s(f+1,b,d,e),j,f)},0),v=e(function f(b,d,i,j){return d===g?d:m(i.call(j,d.a,b),e(f,b+1,h(d),i,j))},0),w=e(function b(d,i,j,k){for(;i!==g;){var l=i.a;if(j.call(i,l,d))return m(l,e(b,d+1,h(i),j,k));++d;i=h(i)}return i},0);return{end:g,stream:m,cons:p,
concat:n,from:function(b){return void 0===b?g:l(b,0,b.length)},first:function(b){return b.a},rest:h,isEmpty:function(b){return b===g},forEach:q,reduce:r,reduceRight:u,toArray:function(b){return r(b,k,[])},map:v,filter:w}});
